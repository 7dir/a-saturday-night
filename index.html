<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A-Saturday-Night</title>
    <meta name="description" content="A WebVR dancing experience using A-Frame by Mozilla VR.">
    <link rel="stylesheet" href="css/main.css">
    <script src="https://cdn.rawgit.com/zenorocha/clipboard.js/v1.5.12/dist/clipboard.min.js"></script>
    <script src="vendor/aframe.js"></script>
    <script src="vendor/motion-capture.js"></script>
    <script src="https://unpkg.com/aframe-uploadcare-component/dist/aframe-uploadcare-component.min.js"></script>
    <script src="build/build.js"></script>
  </head>
  <body>
    <div id="instructions" class="hide">
      <img src="assets/logo.png" alt="a-saturday-night logo">
      <div>
        <h2>Show everybody your moves!</h2>
        <p>This dance was captured using a VR headset and controllers. If you have a HTC Vive or Oculus with controllers, enter VR mode and choose an avatar, record your dance, and share with everybody!</p>
        <p>Meanwhile, you can move around with WASD and mouse.</p>
        <p>
          <a href="http://blog.mozvr.com/a-saturday-night">Read more</a>
        </p>
      </div>
    </div>

    <a-scene uploadcare="publicKey: 85ed3c25d99e387316bd" game-state
             avatar-recorder="spectatorPlay: true; spectatorPosition: 0 1.6 2; localStorage: false; saveFile: false"
             auto-enter-vr="enabled: false">
      <a-assets>
        <a-asset-item id="set-obj" src="assets/room/set.gltf"></a-asset-item>
        <a-asset-item id="floor-obj" src="assets/room/floor.gltf"></a-asset-item>
        <audio id="song1mp3" src="assets/playItAgain.mp3"></audio>
        <audio id="song1ogg" src="assets/playItAgain.ogg"></audio>
        <a-image id="floor-img" src="assets/room/flooron.png"></a-image>
        <a-asset-item id="flooroff-mtl" src="assets/room/flooroff.png"></a-asset-item>
        <a-asset-item id="spotlight-obj" src="assets/room/spotlight.gltf"></a-asset-item>
        <a-image id="spotlight-img" src="assets/room/spotlight.png"></a-image>
        <a-image id="star-img" src="assets/room/star.png"></a-image>
        <a-asset-item id="tv-obj" src="assets/room/tv.gltf"></a-asset-item>

        <a-asset-item id="avatar1-head-obj" src="assets/avatar1/avatar1-head.gltf"></a-asset-item>
        <a-asset-item id="avatar1-hand-right-obj" src="assets/avatar1/avatar1-hand-right.gltf"></a-asset-item>
        <a-asset-item id="avatar1-hand-left-obj" src="assets/avatar1/avatar1-hand-left.gltf"></a-asset-item>

        <a-asset-item id="avatar2-head-obj" src="assets/avatar2/avatar2-head.gltf"></a-asset-item>
        <a-asset-item id="avatar2-hand-right-obj" src="assets/avatar2/avatar2-hand-right.gltf"></a-asset-item>
        <a-asset-item id="avatar2-hand-left-obj" src="assets/avatar2/avatar2-hand-left.gltf"></a-asset-item>

        <a-asset-item id="avatar3-head-obj" src="assets/avatar3/avatar3-head.gltf"></a-asset-item>
        <a-asset-item id="avatar3-hand-right-obj" src="assets/avatar3/avatar3-hand-right.gltf"></a-asset-item>
        <a-asset-item id="avatar3-hand-left-obj" src="assets/avatar3/avatar3-hand-left.gltf"></a-asset-item>

        <a-asset-item id="avatar4-head-obj" src="assets/avatar4/avatar4-head.gltf"></a-asset-item>
        <a-asset-item id="avatar4-hand-right-obj" src="assets/avatar4/avatar4-hand-right.gltf"></a-asset-item>
        <a-asset-item id="avatar4-hand-left-obj" src="assets/avatar4/avatar4-hand-left.gltf"></a-asset-item>
      </a-assets>
      <a-entity id="cameraRig" rotation="0 0 0">
        <a-entity id="avatarHead"
                  camera="userHeight: 0"
                  wasd-controls look-controls
                  position="0 0 0"
                  visible="false"></a-entity>
        <!-- Avatar Hands -->
        <a-entity id="leftHand" vive-controls="hand: left; model: false"></a-entity>
        <a-entity id="rightHand" vive-controls="hand: right; model: false"></a-entity>
        <!-- Selection Hands -->
        <a-entity id="leftSelectionHand" hand-controls="left" aabb-collider="objects: .head" visible="false"></a-entity>
        <a-entity id="rightSelectionHand" hand-controls="right" aabb-collider="objects: .head" visible="false"></a-entity>
      </a-entity>
      <!-- Texts -->
      <a-entity id="counter0Text" visible="false" position="0.87 2.18 -2.42" rotation="23.78 -27.40 0" text="font: assets/asaturdaynight.fnt; color: #fffd6a; align:center;width:3.8"></a-entity>
      <a-entity id="counter1Text" visible="false" position="-1.66 2.18 2.16" rotation="23.78 147.24 0" text="font: assets/asaturdaynight.fnt; color: #fffd6a; align:center;width:3.8"></a-entity>
      <a-entity id="counter0" visible="false" position="0.87 2.18 -2.42" rotation="23.78 -27.40 0" text="font: assets/asaturdaynight.fnt; color: #fffd6a; align:center;width:7.4"></a-entity>
      <a-entity id="counter1" visible="false" position="-1.66 2.18 2.16" rotation="23.78 147.24 0" text="font: assets/asaturdaynight.fnt; color: #fffd6a; align:center;width:7.4"></a-entity>
      <a-entity id="centeredText" text="font: assets/asaturdaynight.fnt; align: center; opacity: 1; width: 6.22;color:#fffdb3;" visible="false" position="0 1.4 -1"></a-entity>

      <!-- Lights -->
      <a-entity id="light0" light="color:#f8b927;intensity:2;type:point;" position="0 -2 0.5"></a-entity>
      <a-entity id="light1" light="type:point;color:#ab7121" position="-2.5 2.38 2.7" ></a-entity>
      <a-entity id="light2" light="color:#205eff;type:point;" position="2.9 2.29 2.7"></a-entity>
      <a-entity id="light3" light="color:#a431f0;type:point;" position="-2.5 2.38 -2.5"></a-entity>
      <a-entity id="light4" light="color:#f130cf;intensity:0.66;type:point;" position="3 2.38 -0.61"></a-entity>
      <!-- spotlights -->
      <a-entity id="spot1" proxy-event="event: dancing" gltf-model="#spotlight-obj" spotlight="color:#ab7121" position="-3.14 2.38 2.7" rotation="44 -38 0" scale="0 0 0">
        <a-animation attribute="scale" begin="dancing" to="1 1 1" dur="1000" easing="ease-out-elastic"></a-animation>
      </a-entity>
      <a-entity id="spot2" proxy-event="event: dancing" gltf-model="#spotlight-obj" spotlight="color:#205eff" position="2.7 2.29 2.7" rotation="50 53 0" scale="0 0 0">
        <a-animation attribute="scale" begin="dancing" to="1 1 1" dur="1000" easing="ease-out-elastic"></a-animation>
      </a-entity>
      <a-entity id="spot3" proxy-event="event: dancing" gltf-model="#spotlight-obj" spotlight="color:#a431f0" position="-3 2.38 -2.5" rotation="-52 60 -13" scale="0 0 0">
        <a-animation attribute="scale" begin="dancing" to="1 1 1" dur="1000" easing="ease-out-elastic"></a-animation>
      </a-entity>
      <a-entity id="spot4" proxy-event="event: dancing" gltf-model="#spotlight-obj" spotlight="color:#f130cf" position="3 2.38 -1.19" rotation="-50 -60 0" scale="0 0 0">
        <a-animation attribute="scale" begin="dancing" to="1 1 1" dur="1000" easing="ease-out-elastic"></a-animation>
      </a-entity>


      <!-- room, floor and TV sets -->
      <a-entity id="room" gltf-model="#set-obj" proxy-event="event: dancing" roomcolor="#999" >
        <a-animation attribute="roomcolor" begin="dancing" to="#FFF" dur="1000" easing="ease-out-elastic"></a-animation>
      </a-entity>
      <a-entity id="floor" gltf-model="#floor-obj" material="shader:flat;src:#floor-img" discofloor position="0 -0.009 0" rotation="0 -90 0"></a-entity>
      <a-image src="#flooroff-mtl" material="repeat: 8 8" rotation="-90 0 0" scale="1.99 1.99 1" position="0 -0.01 0"></a-image>
      <a-entity id="tv1" gltf-model="#tv-obj" position="-1.66 2.15 2.18" rotation="0 -33.3 0"></a-entity>
      <a-entity id="tv2" gltf-model="#tv-obj" position="0.87 2.15 -2.44" rotation="0 151.8 0"></a-entity>
      <!-- Avatar selection -->
      <a-entity id="avatarSelection" scale="0.75 0.75 0.75" position="0 1.6 -1" visible="false">
        <a-entity id="selectionText" text="font: assets/asaturdaynight.fnt; align: center; opacity: 1; width: 6.22; value:Select your avatar; color:#fffdb3;" position="0 -0.5 0"></a-entity>
        <a-entity id="avatar1" class="avatar" rotation="0 180 0">
          <a-entity sound></a-entity>
          <a-entity class="head" gltf-model="#avatar1-head-obj" position="1 0 0" highlighter="color:#ff8"></a-entity>
          <a-entity class="leftHand" gltf-model="#avatar1-hand-left-obj" visible="false"></a-entity>
          <a-entity class="rightHand" gltf-model="#avatar1-hand-right-obj" visible="false"></a-entity>
        </a-entity>

        <a-entity id="avatar2" class="avatar" rotation="0 180 0">
          <a-entity sound></a-entity>
          <a-entity class="head" gltf-model="#avatar2-head-obj" position="0.33 0 0" highlighter="color:#ff0"></a-entity>
          <a-entity class="leftHand" gltf-model="#avatar2-hand-left-obj" visible="false"></a-entity>
          <a-entity class="rightHand" gltf-model="#avatar2-hand-right-obj" visible="false"></a-entity>
        </a-entity>

        <a-entity id="avatar3" class="avatar" rotation="0 180 0">
          <a-entity sound></a-entity>
          <a-entity class="head" gltf-model="#avatar3-head-obj" position="-0.38 0 0" highlighter="color:#ff0"></a-entity>
          <a-entity class="leftHand" gltf-model="#avatar3-hand-left-obj" visible="false"></a-entity>
          <a-entity class="rightHand" gltf-model="#avatar3-hand-right-obj" visible="false"></a-entity>
        </a-entity>

        <a-entity id="avatar4" class="avatar" rotation="0 180 0">
          <a-entity sound></a-entity>
          <a-entity class="head" gltf-model="#avatar4-head-obj" position="-1 0 0" highlighter="color:#ff0"></a-entity>
          <a-entity class="leftHand" gltf-model="#avatar4-hand-left-obj" visible="false"></a-entity>
          <a-entity class="rightHand" gltf-model="#avatar4-hand-right-obj" visible="false"></a-entity>
        </a-entity>
      </a-entity>
    </a-scene>

    <div id="asaturday-ui" class="hide dialog">
      <div class="progress hide">
        Saving dance...
        <div class="bar"></div>
      </div>
      <div class="share hide">
        <div class="help">
          <h1>Dance saved!</h1>
          <p>Your dance was saved in the following URL.<br>You can use it to share your masterpiece in social media.</p>
        </div>
        <div class="form">
        <input id="asaturday-share-url" type="text" value="" readonly/>
        <div id="copy-toclipboard" data-clipboard-target="#asaturday-share-url" class="button copy">COPY URL</div>
        </div>
      </div>
    </div>
  </body>
</html>
